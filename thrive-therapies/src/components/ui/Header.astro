---
import { Icon } from 'astro-icon/components';

import HeaderLink from '@/components/ui/HeaderLink.astro';
import Link from '@/components/ui/Link.astro';
import { LOGO_ICON_COLOR } from '@/constants/icon-color';
import { NAVIGATION_ITEMS } from '@/constants/navigation';
import { ROUTES } from '@/constants/routes';
import { CONFIG_CLIENT } from '@/config/client';
import { getActiveNavItemPath } from '@/utils/routing/navigation';
import { cn } from '@/utils/ui/styles';
import Button from './Button.astro';

import LogoMobile from '@/assets/icons/logo-mobile.astro';
import Logo from '@/assets/icons/logo.astro';

const { pathname: routePathname } = Astro.url;
const activeNavItemPath = getActiveNavItemPath(routePathname);
---

<header id="main-header" class="fixed top-0 left-0 right-0 z-50 bg-transparent">
  <div
    class={cn('flex mx-[var(--space-6xl)] items-center justify-center min-h-[var(--space-4xl)]')}
  >
    {/* mobile nav */}
    <div class="w-full md:w-auto flex justify-between items-center">
      <LogoMobile color={LOGO_ICON_COLOR.PRIMARY} class="w-10 h-10 md:hidden" />
    </div>

    {/* nav items */}
    <nav aria-label="Site navigation" class="flex items-center justify-center">
      <Link
        href="/"
        style={`color: ${LOGO_ICON_COLOR.PRIMARY}`}
        class="flex items-center !p-0 !m-0"
      >
        <Logo color={LOGO_ICON_COLOR.PRIMARY} />
      </Link>
    </nav>

    <ul class="flex" style="gap: var(--space-xl-lg);">
      {
        NAVIGATION_ITEMS.map(({ title, path }) => (
          <li>
            {/* TODO: hard reload for some routes, brand color for different product lines, language switch...etc */}
            {/* {...(path === ROUTES.xxx ? { 'data-astro-reload': true } : {})}} */}
            <HeaderLink
              href={path}
              isActive={path === activeNavItemPath}
              class="!p-0 !m-0 text-secondary"
            >
              {title}
            </HeaderLink>
          </li>
        ))
      }
    </ul>

    <div class="flex items-center gap-4">
      <Link href="login" variant="link" style={`color: ${LOGO_ICON_COLOR.PRIMARY}`}> Login </Link>
      <Button
        class="h-5 bg-primary-lily rounded-[var(--space-xs-lg)] text-secondary font-semibold p-[var(--space-xs-lg)]"
        variant="primary"
      >
        Get Started
      </Button>
    </div>
  </div>

  <div class="border-b border-navbar-divider"></div>
</header>
